Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=require("react-ssr-prepass"),n=require("urql"),a=require("@urql/core"),i=null;function l(){i=null}function s(e,t){var r="undefined"==typeof window;return!r&&i||((i=a.createClient({...e,suspense:t&&(r||e.suspense)})).toJSON=()=>null),i}exports.initUrqlClient=s,exports.withUrqlClient=function(a,i){return i||(i={}),u=>{var o=Boolean((u.getInitialProps||i.ssr)&&!i.neverSuspend),c=({pageProps:r,urqlClient:c,urqlState:d,...p})=>{var[g,h]=t.useReducer((e=>e+1),0),v=r&&r.urqlState||d,q=t.useMemo((()=>{if(c&&!g)return c;e&&"undefined"!=typeof window?g||e.restoreData(v):e=n.ssrExchange({initialState:v,isClient:!0,staleWhileRevalidate:"undefined"!=typeof window?i.staleWhileRevalidate:void 0});var t=a(e);return t.exchanges||(t.exchanges=[n.dedupExchange,n.cacheExchange,e,n.fetchExchange]),s(t,o)}),[c,v,g]),f=t.useCallback((()=>{l(),e=n.ssrExchange({initialState:void 0}),h()}),[]);return t.createElement(n.Provider,{value:q},t.createElement(u,{...p,pageProps:r,urqlClient:q,resetUrqlClient:f}))};return c.displayName=`withUrqlClient(${u.displayName||u.name||"Component"})`,u.getLayout&&(c.getLayout=u.getLayout),(u.getInitialProps||i.ssr)&&(c.getInitialProps=async e=>{var l=e.AppTree,o=!!e.Component,c=o?e.ctx:e,d=n.ssrExchange({initialState:void 0}),p=a(d,c);p.exchanges||(p.exchanges=[n.dedupExchange,n.cacheExchange,d,n.fetchExchange]);var g=s(p,!i.neverSuspend);g&&(c.urqlClient=g);var h={};if(u.getInitialProps&&(h=await u.getInitialProps(e),c.res&&(c.res.writableEnded||c.res.finished)))return{...h,urqlClient:g};if("undefined"!=typeof window)return{...h,urqlClient:g};var v={...h,urqlClient:g},q=o?v:{pageProps:v};return i.neverSuspend||await r(t.createElement(l,q)),{...h,urqlState:d?d.extractData():void 0,urqlClient:g}}),c}};
//# sourceMappingURL=next-urql.min.js.map
